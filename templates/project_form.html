<!-- templates/project_form.html -->
<!-- 委託人建立/修改專案的表單頁面 -->
<!-- 主要功能：
1. 新增專案需求
2. 修改現有專案
3. 表單驗證和錯誤提示
-->

{% extends "base.html" %}
{% block content %}
<!-- 根據情境顯示不同的標題 -->
<h1>{% if project %}修改需求案{% else %}提需求案{% endif %}</h1>

<!-- 錯誤訊息顯示區 -->
{% if error %}
<div style="color: red; margin-bottom: 1em;">
    {{ error }}
</div>
{% endif %}

<!-- 專案表單 -->
<!-- 根據是否為編輯模式決定表單提交的目標路徑 -->
<form method="post" action="{% if project %}/edit_project/{{ project.id }}{% else %}/create_project{% endif %}">
    <!-- 專案標題 -->
    <label>標題: <input type="text" name="title" value="{{ project.title if project else '' }}" required></label><br>

    <!-- 專案描述 -->
    <label>描述: <textarea name="description" required>{{ project.description if project else '' }}</textarea></label><br>

    <!-- 預算設定，限制最小值為 0 -->
    <label>預算 ($): <input type="number" name="budget" step="0.01" value="{{ project.budget if project else '' }}"
            required min="0"></label><br>

    <!-- 截止日期，限制最小值為今天 -->
    <label>截止日期: <input type="date" name="deadline" value="{{ project.deadline if project else '' }}" required
            min="{{ today }}"></label><br>

    <button type="submit">提交</button>
</form>
{% endblock %}